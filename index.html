<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fouquetâ€™s Joy â€¢ Gold Motion v17</title>

  <!-- ğŸ¨ PWA / Theme -->
  <meta name="theme-color" content="#C9A227" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- ğŸªª Manifest + IcÃ´nes -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
  <link rel="apple-touch-icon" href="icons/icon-512.png" />

  <!-- ğŸ“˜ Styles + Scripts -->
  <link rel="stylesheet" href="styles.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script defer src="app.js"></script>

  <style>
    body {
      background-color: #FFF8E7;
      margin: 0;
      font-family: "Inter", sans-serif;
      color: #2E2E2E;
    }
    header.topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(90deg, #5A0D0D 0%, #7B1F1F 100%);
      color: #FFF8E7;
      padding: 0.8rem 1rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    .brand img {
      width: 42px;
      height: 42px;
      border-radius: 8px;
      object-fit: cover;
    }
    .brand-title { font-size: 1.2rem; font-weight: 700; color: #FFF8E7; }
    .brand-sub { font-size: 0.8rem; color: #C9A227; }
    .status-badge {
      font-size: 0.8rem;
      background: #C9A227;
      color: #5A0D0D;
      padding: 3px 8px;
      border-radius: 12px;
      font-weight: 600;
    }
    nav.tabs {
      display: flex;
      overflow-x: auto;
      background: #FFF8E7;
      border-bottom: 2px solid #C9A227;
    }
    .tab {
      flex: 1;
      padding: 0.6rem;
      font-weight: 600;
      color: #5A0D0D;
      border: none;
      background: transparent;
      cursor: pointer;
      transition: 0.3s;
    }
    .tab.active {
      background: #C9A227;
      color: #FFF8E7;
      border-radius: 6px 6px 0 0;
    }
    .container { padding: 1rem; }
    footer.footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.8rem;
      color: #7A6B47;
      background: #FFF8E7;
      border-top: 1px solid rgba(0,0,0,0.05);
    }
  </style>
</head>

<body>
  <!-- === HEADER === -->
  <header class="topbar">
    <div class="brand">
      <img src="icons/icon-192.png" alt="Logo Fouquetâ€™s Joy">
      <div>
        <div class="brand-title">Fouquetâ€™s Joy</div>
        <div class="brand-sub">Gold Motion â€¢ Ivoire & Or</div>
      </div>
    </div>
    <div class="actions">
      <span id="syncBadge" class="status-badge offline">Hors ligne</span>
      <button class="btn ghost" id="btnSync">â‡… Sync</button>
    </div>
  </header>

  <!-- === NAVIGATION === -->
  <nav class="tabs">
    <button class="tab active" data-view="dashboard">ğŸ“Š Dashboard</button>
    <button class="tab" data-view="pertes">ğŸ—‘ï¸ Pertes</button>
    <button class="tab" data-view="invj">ğŸ“¦ Inventaire J.</button>
    <button class="tab" data-view="invm">ğŸ·ï¸ Inventaire M.</button>
    <button class="tab" data-view="recettes">ğŸ½ï¸ Recettes</button>
    <button class="tab" data-view="settings">âš™ï¸ ParamÃ¨tres</button>
  </nav>

  <main id="app" class="container"></main>

  <footer class="footer">Â© Fouquetâ€™s Joy â€” Gold Motion v17</footer>

  <!-- === DASHBOARD === -->
  <template id="tpl-dashboard">
    <section class="section">
      <div class="grid-3">
        <div class="card kpi">
          <div class="kpi-title">Valeur du stock</div>
          <div class="kpi-value" id="kpiStock">â€”</div>
          <div class="kpi-sub" id="kpiStockQte">â€”</div>
        </div>
        <div class="card kpi">
          <div class="kpi-title">Pertes (mois)</div>
          <div class="kpi-value" id="kpiPertes">â€”</div>
          <div class="kpi-sub" id="kpiPertesLabel">Poids total des pertes (kg)</div>
        </div>
        <div class="card kpi">
          <div class="kpi-title">Alertes seuil</div>
          <div class="kpi-value" id="kpiSeuils">â€”</div>
          <div class="kpi-sub">produits</div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“‹ Ã‰tat du stock courant</div>
        <table class="list" id="tableStockDetail">
          <thead>
            <tr>
              <th>Produit</th><th>QtÃ©</th><th>UnitÃ©</th><th>Prix (â‚¬)</th><th>Valeur (â‚¬)</th><th>Zone</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“‰ Analyse des pertes</div>
        <div class="toggle-container">
          <span>Vue simple</span>
          <label class="toggle-switch">
            <input type="checkbox" id="togglePareto"><span class="slider"></span>
          </label>
          <span>Pareto</span>
        </div>
        <canvas id="chartPertes" height="140"></canvas>
        <div id="pertesLegend"></div>
      </div>
    </section>
  </template>

  <!-- === PERTES === -->
  <template id="tpl-pertes">
    <section class="section">
      <div class="card">
        <div class="card-title">ğŸ—‘ï¸ Saisie des pertes</div>
        <div class="grid">
          <div class="input-field"><label for="pertesProduit">Produit</label>
            <input id="pertesProduit" list="dlProduitsPertes" placeholder="Choisir ou saisir" />
            <datalist id="dlProduitsPertes"></datalist>
          </div>
          <div class="input-field"><label for="pertesQte">QuantitÃ©</label>
            <input id="pertesQte" type="number" step="0.01" placeholder="Ex. 1.20"/>
          </div>
          <div class="input-field"><label for="pertesUnite">UnitÃ©</label>
            <input id="pertesUnite" placeholder="kg / L / piÃ¨ce"/>
          </div>
          <div class="input-field"><label for="pertesMotif">Motif</label>
            <input id="pertesMotif" placeholder="DLUO / Casse / Surcuisson"/>
          </div>
          <div class="input-field"><label for="pertesComment">Commentaire</label>
            <input id="pertesComment" placeholder="Optionnel"/>
          </div>
        </div>
        <div class="row-actions">
          <button class="btn" id="btnSavePerte">ğŸ’¾ Enregistrer</button>
          <button class="btn ghost" id="btnResetPerte">â†©ï¸ RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <!-- === INVENTAIRE JOURNALIER === -->
  <template id="tpl-invj">
    <section class="section">
      <div class="card">
        <div class="card-title">ğŸ“¦ Inventaire journalier</div>
        <div class="grid">
          <div class="input-field"><label for="invjProduit">Produit</label>
            <input id="invjProduit" list="dlProduitsInvJ" placeholder="Nom du produit"/>
            <datalist id="dlProduitsInvJ"></datalist>
          </div>
          <div class="input-field"><label for="invjQte">QuantitÃ©</label>
            <input id="invjQte" type="number" step="0.01" placeholder="Ex. 2.50"/>
          </div>
          <div class="input-field"><label for="invjUnite">UnitÃ©</label>
            <input id="invjUnite" placeholder="kg / L / piÃ¨ce"/>
          </div>
        </div>
        <div class="row-actions">
          <button class="btn success" id="btnInvJEntree">â¬†ï¸ EntrÃ©e</button>
          <button class="btn danger" id="btnInvJSortie">â¬‡ï¸ Sortie</button>
          <button class="btn ghost" id="btnResetInvJ">â†©ï¸ RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <!-- === INVENTAIRE MENSUEL === -->
  <template id="tpl-invm">
    <section class="section">
      <div class="card invm-header">
        <div class="card-title">ğŸ·ï¸ Inventaire Mensuel</div>
        <div class="grid" style="align-items:end;">
          <div class="input-field"><label for="invmZone">Zone</label><select id="invmZone"></select></div>
          <div class="input-field"><label for="invmMois">Mois</label><input type="month" id="invmMois"/></div>
          <div class="input-field"><button class="btn gold" id="btnGenSheet">ğŸ“„ GÃ©nÃ©rer la feuille</button></div>
        </div>
      </div>

      <div class="card invm-body">
        <div class="card-subtitle">ğŸ“‹ Feuille dâ€™inventaire</div>
        <table class="list" id="invTable">
          <thead><tr><th>Produit</th><th>QuantitÃ©</th><th>UnitÃ©</th><th>Commentaire</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
        <div class="row-actions center">
          <button class="btn ghost" id="btnAddRow">â• Ajouter une ligne</button>
          <button class="btn success" id="btnSaveInv">ğŸ’¾ Valider</button>
        </div>
      </div>
    </section>
  </template>

  <!-- === RECETTES === -->
  <template id="tpl-recettes">
    <section class="section">
      <div class="card">
        <div class="card-title">ğŸ½ï¸ Recettes</div>

        <div class="grid" style="margin-bottom:10px; align-items:end;">
          <div class="input-field" style="flex:2;">
            <label for="recetteSearch">Recherche</label>
            <input id="recetteSearch" placeholder="Rechercher une recette...">
          </div>
          <div class="input-field" style="flex:1;">
            <label for="recetteFactor">Multiplicateur</label>
            <input id="recetteFactor" type="number" value="1" step="0.5" min="0.1">
          </div>
          <button class="btn gold" id="btnApplyFactor">Appliquer</button>
        </div>

        <div id="recettesList" class="grid-cards"></div>
      </div>
    </section>
  </template>

  <!-- === PARAMÃˆTRES === -->
  <template id="tpl-settings">
    <section class="section">
      <div class="card">
        <div class="card-title">âš™ï¸ ParamÃ¨tres</div>
        <div class="grid">
          <div class="input-field"><label for="setEtab">Ã‰tablissement</label>
            <input id="setEtab" placeholder="Fouquetâ€™s Joy"/></div>
          <div class="input-field"><label for="setTz">Fuseau horaire</label>
            <select id="setTz"><option>Europe/Paris</option><option>Europe/Rome</option><option>America/New_York</option></select></div>
          <div class="input-field"><label for="setEmail">Email Cost-Control</label>
            <input id="setEmail" placeholder="costcontrol@fouquets.fr"/></div>
          <div class="input-field"><label for="setLang">Langue</label>
            <select id="setLang"><option value="fr">FranÃ§ais</option><option value="en">English</option><option value="it">Italiano</option><option value="es">EspaÃ±ol</option></select></div>
        </div>
        <div class="row-actions"><button class="btn" id="btnSetSave">ğŸ’¾ Enregistrer</button></div>
      </div>
    </section>
  </template>
</body>
</html>
