<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ğŸ· Fouquetâ€™s Suite Joy v15.3</title>
  <meta name="theme-color" content="#5A0D0D">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">

  <style>
    body{font-family:"Inter",sans-serif;margin:0;background:#FFF8E7;color:#3A1B1B}
    header{background:#5A0D0D;color:#FFF8E7;padding:10px;box-shadow:0 3px 8px rgba(0,0,0,.2)}
    .topbar-inner{display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;align-items:center;gap:10px}
    .brand-badge{background:#C9A227;color:#5A0D0D;width:34px;height:34px;border-radius:50%;
      font-weight:900;display:flex;align-items:center;justify-content:center;font-size:18px}
    .tabs{display:flex;gap:4px;flex-wrap:wrap;margin-top:8px}
    .tab{flex:1;padding:6px;border:none;border-radius:6px;background:#FFF8E7;color:#5A0D0D;font-weight:600;cursor:pointer}
    .tab.active{background:#C9A227;color:#FFF}
    main{padding:12px}
    .card{background:#FFF;border-radius:10px;padding:12px;box-shadow:0 2px 6px rgba(0,0,0,.08);margin-bottom:10px}
    .grid{display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
    .btn{background:#5A0D0D;color:#FFF8E7;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    .btn-entree{background:#198754}.btn-sortie{background:#DC3545}
    .status-badge.online{background:#198754;color:#fff;padding:3px 6px;border-radius:6px}
    .status-badge.offline{background:#DC3545;color:#fff;padding:3px 6px;border-radius:6px}
    table{width:100%;border-collapse:collapse;margin-top:10px}th,td{border-bottom:1px solid #eee;padding:6px;text-align:left}
  </style>
  <script defer src="app.js"></script>
</head>
<body>
  <header>
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-badge">F</div>
        <div>
          <div style="font-weight:700">Fouquetâ€™s Joy Suite</div>
          <div style="font-size:11px;color:#E9D7A8">Gold Motion Edition</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:8px">
        <span id="syncBadge" class="status-badge offline">Hors ligne</span>
        <button class="btn" id="btnSync">â‡… Sync</button>
      </div>
    </div>
    <div class="tabs">
      <button class="tab active" data-view="dashboard">ğŸ“Š Dashboard</button>
      <button class="tab" data-view="pertes">ğŸ—‘ï¸ Pertes</button>
      <button class="tab" data-view="invj">ğŸ“¦ Inv. journalier</button>
      <button class="tab" data-view="invm">ğŸ·ï¸ Inv. mensuel</button>
      <button class="tab" data-view="recettes">ğŸ½ï¸ Recettes</button>
    </div>
  </header>

  <main id="app"></main>

  <!-- === Templates === -->
  <template id="tpl-dashboard">
    <div class="card"><strong>Valeur stock :</strong> <span id="kpiStock">â€”</span> (<span id="kpiStockQte">â€”</span>)</div>
    <div class="card"><strong>Ã‰tat du stock courant :</strong>
      <table id="tableStockDetail"><thead><tr><th>Produit</th><th>QtÃ©</th><th>UnitÃ©</th><th>Valeur (â‚¬)</th></tr></thead><tbody></tbody></table>
    </div>
  </template>

  <template id="tpl-pertes">
    <div class="card">
      <h3>ğŸ—‘ï¸ Enregistrer une perte</h3>
      <div class="grid">
        <input id="pertesProduit" placeholder="Produit">
        <input id="pertesQte" placeholder="QuantitÃ©">
        <input id="pertesUnite" placeholder="UnitÃ©">
        <input id="pertesMotif" placeholder="Motif">
      </div>
      <button class="btn" id="btnSavePerte">ğŸ’¾ Enregistrer</button>
    </div>
  </template>

  <template id="tpl-invj">
    <div class="card">
      <h3>ğŸ“¦ Inventaire journalier</h3>
      <div class="grid">
        <input id="invjProduit" placeholder="Produit">
        <input id="invjQte" placeholder="QuantitÃ©">
        <input id="invjUnite" placeholder="UnitÃ©">
      </div>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:8px">
        <button class="btn btn-entree" id="btnInvJEntree">â¬†ï¸ EntrÃ©e</button>
        <button class="btn btn-sortie" id="btnInvJSortie">â¬‡ï¸ Sortie</button>
      </div>
    </div>
  </template>

  <template id="tpl-invm">
    <div class="card">
      <h3>ğŸ·ï¸ Inventaire mensuel</h3>
      <div class="grid">
        <select id="invmZone"></select>
        <input type="month" id="invmMois">
        <input id="invmProduit" placeholder="Produit">
        <input id="invmQte" placeholder="QuantitÃ©">
        <input id="invmUnite" placeholder="UnitÃ©">
        <input id="invmComment" placeholder="Commentaire">
      </div>
      <button class="btn" id="btnInvmSave">ğŸ’¾ Enregistrer</button>
    </div>
  </template>

  <template id="tpl-recettes">
    <div class="card">
      <h3>ğŸ½ï¸ Recettes</h3>
      <div id="recettesList" class="grid"></div>
      <div id="recetteDetail"></div>
    </div>
  </template>

  <!-- Service Worker -->
  <script>
    if("serviceWorker"in navigator){
      window.addEventListener("load",()=>{
        navigator.serviceWorker.register("./service-worker.js")
          .then(()=>console.log("âœ… Service Worker actif"))
          .catch(e=>console.error("âŒ SW :",e))
      })
    }
  </script>
</body>
</html>
