<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fouquetâ€™s Joy Suite</title>
  <meta name="theme-color" content="#5A0D0D"/>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/favicon.ico">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script defer src="app.js" type="module"></script>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-badge">F</div>
        <div>
          <div style="font-weight:700">Fouquetâ€™s Joy</div>
          <div style="font-size:11px;color:#E9D7A8">Suite Gold Motion</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <span class="badge">Manager</span>
        <span id="syncBadge" class="status-badge offline">Hors ligne</span>
        <button class="btn" id="btnSync">â‡… Synchroniser</button>
      </div>
    </div>
    <div class="tabs" id="tabs">
      <button class="tab active" data-view="dashboard">ğŸ“Š Dashboard</button>
      <button class="tab" data-view="pertes">ğŸ—‘ï¸ Pertes</button>
      <button class="tab" data-view="invj">ğŸ“¦ Inventaire journalier</button>
      <button class="tab" data-view="invm">ğŸ·ï¸ Inventaire mensuel</button>
      <button class="tab" data-view="recettes">ğŸ½ï¸ Recettes</button>
      <button class="tab" data-view="settings">âš™ï¸ ParamÃ¨tres</button>
    </div>
  </header>

  <main id="app" class="container"></main>

  <footer class="bottom" style="height:68px"></footer>

  <!-- Templates (identiques Ã  v14.3; Dashboard inclut stock dÃ©taillÃ©) -->
  <template id="tpl-dashboard">
    <section class="section">
      <div class="grid-3">
        <div class="card">
          <div class="kpi-title">Valeur du stock</div>
          <div class="kpi-value" id="kpiStock">â€”</div>
          <div style="font-size:12px;color:#7a2020" id="kpiStockQte">â€”</div>
        </div>
        <div class="card"><div class="kpi-title">Pertes (mois)</div><div class="kpi-value" id="kpiPertes">â€”</div></div>
        <div class="card"><div class="kpi-title">Alertes seuil</div><div class="kpi-value" id="kpiSeuils">â€”</div></div>
      </div>
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Top 10 pertes</strong><span style="font-size:11px;color:#7a2020">qtÃ© & valeur</span>
        </div>
        <table class="list" id="topPertes"><thead><tr><th>Produit</th><th>QtÃ©</th><th>Valeur</th></tr></thead><tbody></tbody></table>
      </div>
      <div class="card">
        <strong>ğŸ“‹ Ã‰tat du stock courant</strong>
        <table class="list" id="tableStockDetail">
          <thead><tr><th>Produit</th><th>QtÃ©</th><th>UnitÃ©</th><th>Prix (â‚¬)</th><th>Valeur (â‚¬)</th><th>Zone</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <strong>Pertes â€“ 7 jours</strong>
        <canvas id="chartPertes" height="120"></canvas>
      </div>
    </section>
  </template>

  <template id="tpl-pertes">
    <section class="section">
      <div class="card">
        <h3 style="color:#7a2020;margin:0 0 8px 0">ğŸ—‘ï¸ Saisie des pertes</h3>
        <div class="grid">
          <div class="input-field input-icon">
            <label>Produit</label><span>ğŸ§¾</span>
            <input list="produitsList" id="pertesProduit" placeholder="Choisir ou saisir un produit" />
            <datalist id="produitsList"></datalist>
            <div class="hint">DonnÃ©es depuis Sheets, saisie libre possible.</div>
          </div>
          <div class="input-field input-icon"><label>QuantitÃ©</label><span>âš–ï¸</span><input id="pertesQte" placeholder="Ex. 1.20"/></div>
          <div class="input-field input-icon"><label>UnitÃ©</label><span>ğŸ§ª</span><input id="pertesUnite" placeholder="kg / L / piÃ¨ce"/></div>
          <div class="input-field input-icon"><label>Motif</label><span>ğŸ§¯</span><input id="pertesMotif" placeholder="DLUO / Casse / Surcuisson"/></div>
          <div class="input-field input-icon"><label>Zone</label><span>ğŸ“¦</span><input id="invPZone"></select></div>
          <div class="input-field input-icon"><label>Commentaire</label><span>ğŸ’¬</span><input id="pertesComment" placeholder="Optionnel"/></div>
        </div>
        <div style="display:flex;gap:10px;margin-top:10px">
          <button class="btn" id="btnSavePerte">Enregistrer</button>
          <button class="btn" id="btnResetPerte">RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <template id="tpl-invj">
    <section class="section">
      <div class="card">
        <h3 style="color:#7a2020;margin:0 0 8px 0">ğŸ“¦ Inventaire journalier</h3>
        <div class="grid">
          <div class="input-field input-icon"><label>Produit</label><span>ğŸ§¾</span><input list="produitsList" id="invjProduit" placeholder="Choisir ou saisir un produit" /></div>
          <div class="input-field input-icon"><label>QuantitÃ©</label><span>âš–ï¸</span><input id="invjQte" placeholder="Ex. 2.50" /></div>
          <div class="input-field input-icon"><label>UnitÃ©</label><span>ğŸ§ª</span><input id="invjUnite" placeholder="kg / L / piÃ¨ce" /></div>
          <div class="input-field input-icon"><label>Zone</label><span>ğŸ“¦</span><input id="invJZone"></select></div>
        </div>
        <div style="display:flex;gap:10px;margin-top:10px">
          <button class="btn" id="btnSaveInvJ">ğŸ’¾ Enregistrer</button>
          <button class="btn" id="btnResetInvJ">RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <template id="tpl-invm">
    <section class="section">
      <div class="card">
        <h3 style="color:#7a2020;margin:0 0 8px 0">ğŸ·ï¸ Inventaire mensuel</h3>
        <div class="grid">
          <div class="input-field input-icon"><label>Zone</label><span>ğŸ“¦</span><select id="invmZone"></select></div>
          <div class="input-field input-icon"><label>Mois concernÃ©</label><span>ğŸ“…</span><input type="month" id="invmMois" /></div>
          <div class="input-field input-icon"><label>Produit</label><span>ğŸ§¾</span><input id="invmProduit" placeholder="Nom du produit" /></div>
          <div class="input-field input-icon"><label>QuantitÃ©</label><span>âš–ï¸</span><input id="invmQte" placeholder="Ex. 5.00" /></div>
          <div class="input-field input-icon"><label>UnitÃ©</label><span>ğŸ§ª</span><input id="invmUnite" placeholder="kg / L / piÃ¨ce" /></div>
          <div class="input-field input-icon"><label>Commentaires</label><span>ğŸ’¬</span><input id="invmComment" placeholder="Notes supplÃ©mentaires" /></div>
        </div>
        <div style="display:flex;flex-direction:column;gap:10px;margin-top:10px">
          <button class="btn" id="btnInvmGenerate">ğŸ“„ GÃ©nÃ©rer la feuille</button>
          <button class="btn" id="btnInvmSave">ğŸ’¾ Enregistrer sur la feuille</button>
          <button class="btn" id="btnInvmReset">RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <template id="tpl-recettes">
    <section class="section">
      <div class="card">
        <h3 style="color:#7a2020;margin:0 0 8px 0">ğŸ½ï¸ Recettes</h3>
        <div class="input-field input-icon" style="margin-bottom:10px">
          <label>Recherche</label><span>ğŸ”</span>
          <input id="recetteSearch" placeholder="Rechercher une recette...">
        </div>
        <div id="recettesList" class="grid" style="margin-top:10px"></div>
        <div id="recetteDetail" style="margin-top:20px"></div>
      </div>
    </section>
  </template>

  <template id="tpl-settings">
    <section class="section">
      <div class="card">
        <h3 style="color:#7a2020;margin:0 0 8px 0">âš™ï¸ ParamÃ¨tres</h3>
        <div class="grid">
          <div class="input-field input-icon"><label>Ã‰tablissement</label><span>ğŸ¨</span><input id="setEtab" placeholder="Fouquetâ€™s Joy"/></div>
          <div class="input-field input-icon"><label>Fuseau horaire</label><span>ğŸŒ</span><select id="setTz"><option>Europe/Paris</option><option>Europe/Rome</option><option>America/New_York</option></select></div>
          <div class="input-field input-icon"><label>Email Cost-Control</label><span>âœ‰ï¸</span><input id="setEmail" placeholder="costcontrol@fouquets.fr"/></div>
          <div class="input-field input-icon"><label>Langue par dÃ©faut</label><span>ğŸ—£ï¸</span><select id="setLang"><option value="fr">FranÃ§ais</option><option value="en">English</option><option value="it">Italiano</option><option value="es">EspaÃ±ol</option></select></div>
        </div>
        <div style="display:flex;gap:10px;margin-top:10px"><button class="btn" id="btnSetSave">ğŸ’¾ Enregistrer</button></div>
      </div>
    </section>
  </template>
</body>
</html>
