<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fouquetâ€™s Joy â€¢ Gold Motion v16.5</title>
  <meta name="theme-color" content="#5A0D0D"/>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/favicon.ico">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script defer src="app.js"></script>
  <style>
    .toggle-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 0.8rem;
      font-weight: 500;
      color: #5A0D0D;
      gap: 10px;
    }
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
    }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 26px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 20px; width: 20px;
      left: 3px; bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #C9A227;
    }
    input:checked + .slider:before {
      transform: translateX(24px);
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-badge">F</div>
      <div class="brand-text">
        <div class="brand-title">Fouquetâ€™s Joy</div>
        <div class="brand-sub">Gold Motion â€¢ Ivoire & Or</div>
      </div>
    </div>
    <div class="actions">
      <span id="syncBadge" class="status-badge offline" title="Statut">Hors ligne</span>
      <button class="btn ghost" id="btnSync">â‡… Synchroniser</button>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-view="dashboard">ğŸ“Š Dashboard</button>
    <button class="tab" data-view="pertes">ğŸ—‘ï¸ Pertes</button>
    <button class="tab" data-view="invj">ğŸ“¦ Inventaire J.</button>
    <button class="tab" data-view="invm">ğŸ·ï¸ Inventaire M.</button>
    <button class="tab" data-view="recettes">ğŸ½ï¸ Recettes</button>
    <button class="tab" data-view="settings">âš™ï¸ ParamÃ¨tres</button>
  </nav>

  <main id="app" class="container"></main>
  <footer class="footer">Â© Fouquetâ€™s Joy â€“ Gold Motion v16.5</footer>

  <!-- === DASHBOARD === -->
  <template id="tpl-dashboard">
    <section class="section">
      <div class="grid-3">
        <div class="card kpi">
          <div class="kpi-title">Valeur du stock</div>
          <div class="kpi-value" id="kpiStock">â€”</div>
          <div class="kpi-sub" id="kpiStockQte">â€”</div>
        </div>
        <div class="card kpi">
          <div class="kpi-title">Pertes (mois)</div>
          <div class="kpi-value" id="kpiPertes">â€”</div>
          <div class="kpi-sub" id="kpiPertesLabel">Poids total des pertes (kg)</div>
        </div>
        <div class="card kpi">
          <div class="kpi-title">Alertes seuil</div>
          <div class="kpi-value" id="kpiSeuils">â€”</div>
          <div class="kpi-sub">produits</div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“‹ Ã‰tat du stock courant</div>
        <table class="list" id="tableStockDetail">
          <thead>
            <tr>
              <th>Produit</th>
              <th>QtÃ©</th>
              <th>UnitÃ©</th>
              <th>Prix (â‚¬)</th>
              <th>Valeur (â‚¬)</th>
              <th>Zone</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“‰ Analyse des pertes</div>
        <div class="toggle-container">
          <span>Vue simple</span>
          <label class="toggle-switch">
            <input type="checkbox" id="togglePareto">
            <span class="slider"></span>
          </label>
          <span>Pareto</span>
        </div>
        <canvas id="chartPertes" height="140"></canvas>
        <div id="pertesLegend"></div>
      </div>
    </section>
  </template>

  <!-- === PERTES === -->
  <template id="tpl-pertes">
    <section class="section">
      <div class="card">
        <div class="card-title">ğŸ—‘ï¸ Saisie des pertes</div>
        <div class="grid">
          <div class="input-field">
            <label for="pertesProduit">Produit</label>
            <input id="pertesProduit" list="dlProduitsPertes" placeholder="Choisir ou saisir" />
            <datalist id="dlProduitsPertes"></datalist>
          </div>
          <div class="input-field">
            <label for="pertesQte">QuantitÃ©</label>
            <input id="pertesQte" type="number" step="0.01" placeholder="Ex. 1.20"/>
          </div>
          <div class="input-field">
            <label for="pertesUnite">UnitÃ©</label>
            <input id="pertesUnite" placeholder="kg / L / piÃ¨ce"/>
          </div>
          <div class="input-field">
            <label for="pertesMotif">Motif</label>
            <input id="pertesMotif" placeholder="DLUO / Casse / Surcuisson"/>
          </div>
          <div class="input-field">
            <label for="pertesComment">Commentaire</label>
            <input id="pertesComment" placeholder="Optionnel"/>
          </div>
        </div>
        <div class="row-actions">
          <button class="btn" id="btnSavePerte">ğŸ’¾ Enregistrer</button>
          <button class="btn ghost" id="btnResetPerte">â†©ï¸ RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <!-- === INVENTAIRE JOURNALIER === -->
  <template id="tpl-invj">
    <section class="section">
      <div class="card">
        <div class="card-title">ğŸ“¦ Inventaire journalier</div>
        <div class="grid">
          <div class="input-field">
            <label for="invjProduit">Produit</label>
            <input id="invjProduit" list="dlProduitsInvJ" placeholder="Nom du produit"/>
            <datalist id="dlProduitsInvJ"></datalist>
          </div>
          <div class="input-field">
            <label for="invjQte">QuantitÃ©</label>
            <input id="invjQte" type="number" step="0.01" placeholder="Ex. 2.50"/>
          </div>
          <div class="input-field">
            <label for="invjUnite">UnitÃ©</label>
            <input id="invjUnite" placeholder="kg / L / piÃ¨ce"/>
          </div>
        </div>
        <div class="row-actions">
          <button class="btn success" id="btnInvJEntree">â¬†ï¸ EntrÃ©e</button>
          <button class="btn danger" id="btnInvJSortie">â¬‡ï¸ Sortie</button>
          <button class="btn ghost" id="btnResetInvJ">â†©ï¸ RÃ©initialiser</button>
        </div>
      </div>
    </section>
  </template>

  <!-- === INVENTAIRE MENSUEL === -->
  <template id="tpl-invm">
    <section class="section">
      <div class="card invm-header">
        <div class="card-title">ğŸ·ï¸ Inventaire Mensuel</div>
        <div class="grid" style="align-items:end;">
          <div class="input-field">
            <label for="invmZone">Zone</label>
            <select id="invmZone"></select>
          </div>
          <div class="input-field">
            <label for="invmMois">Mois</label>
            <input type="month" id="invmMois" />
          </div>
          <div class="input-field">
            <button class="btn gold" id="btnGenSheet">ğŸ“„ GÃ©nÃ©rer la feuille</button>
          </div>
        </div>
      </div>

      <div class="card invm-body">
        <div class="card-subtitle">ğŸ“‹ Feuille dâ€™inventaire</div>
        <table class="list" id="invTable">
          <thead>
            <tr>
              <th>Produit</th>
              <th>QuantitÃ©</th>
              <th>UnitÃ©</th>
              <th>Commentaire</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="row-actions center">
          <button class="btn ghost" id="btnAddRow">â• Ajouter une ligne</button>
          <button class="btn success" id="btnSaveInv">ğŸ’¾ Valider lâ€™inventaire</button>
        </div>
      </div>
    </section>
  </template>

  <!-- === RECETTES === -->
  <template id="tpl-recettes">
    <section class="section">
      <div class="card">
        <div class="card-title">ğŸ½ï¸ Recettes</div>
        <div class="input-field" style="margin-bottom:10px">
          <label for="recetteSearch">Recherche</label>
          <input id="recetteSearch" placeholder="Rechercher une recette...">
        </div>
        <div id="recettesList" class="grid-cards"></div>
      </div>
    </section>
  </template>

  <!-- === PARAMÃˆTRES === -->
  <template id="tpl-settings">
    <section class="section">
      <div class="card">
        <div class="card-title">âš™ï¸ ParamÃ¨tres</div>
        <div class="grid">
          <div class="input-field">
            <label for="setEtab">Ã‰tablissement</label>
            <input id="setEtab" placeholder="Fouquetâ€™s Joy"/>
          </div>
          <div class="input-field">
            <label for="setTz">Fuseau horaire</label>
            <select id="setTz">
              <option>Europe/Paris</option>
              <option>Europe/Rome</option>
              <option>America/New_York</option>
            </select>
          </div>
          <div class="input-field">
            <label for="setEmail">Email Cost-Control</label>
            <input id="setEmail" placeholder="costcontrol@fouquets.fr"/>
          </div>
          <div class="input-field">
            <label for="setLang">Langue</label>
            <select id="setLang">
              <option value="fr">FranÃ§ais</option>
              <option value="en">English</option>
              <option value="it">Italiano</option>
              <option value="es">EspaÃ±ol</option>
            </select>
          </div>
        </div>
        <div class="row-actions">
          <button class="btn" id="btnSetSave">ğŸ’¾ Enregistrer</button>
        </div>
      </div>
    </section>
  </template>
</body>
</html>
